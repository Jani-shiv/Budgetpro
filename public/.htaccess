# Apache Configuration File

# Prevent directory listing
Options -Indexes

# Set the default handler
DirectoryIndex index.php

# Rewrite engine setup
RewriteEngine On

# If the request is for a real file or directory, leave it alone
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Otherwise, redirect everything to index.php
RewriteRule ^(.*)$ index.php [QSA,L]

# Security Headers
<IfModule mod_headers.c>
    # Protect against clickjacking
    Header set X-Frame-Options "SAMEORIGIN"
    
    # Protect against XSS attacks
    Header set X-XSS-Protection "1; mode=block"
    
    # Prevent MIME-sniffing
    Header set X-Content-Type-Options "nosniff"
    
    # HSTS (uncomment if using HTTPS)
    # Header set Strict-Transport-Security "max-age=31536000; includeSubDomains"
</IfModule>

# Protect .env.php and other sensitive files
<FilesMatch "^\.env">
    Order allow,deny
    Deny from all
</FilesMatch>

# Restrict access to uploads directory
<Directory "uploads">
    Options -ExecCGI
    php_flag engine off
    <FilesMatch "\.php$">
        Order allow,deny
        Deny from all
    </FilesMatch>
</Directory>

# PHP settings
php_flag display_errors Off
php_value max_execution_time 30
php_value max_input_time 60
php_value max_input_vars 1000
php_value memory_limit 128M
php_value post_max_size 8M
php_value upload_max_filesize 5M
php_flag session.cookie_httponly On
php_flag session.use_only_cookies On
